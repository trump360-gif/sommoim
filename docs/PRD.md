# 소모임 플랫폼 (Sommoim) - PRD v3.1

**작성일:** 2025-12-03
**버전:** 3.1
**상태:** 개발 준비 완료

---

## 1. 프로젝트 개요

### 1.1 기본 정보

| 항목 | 내용 |
|------|------|
| 프로젝트명 | Sommoim (소모임) |
| 목표 | 관심사 기반 소모임 생성/참가 플랫폼 |
| 타겟 | 20-40대 취미/관심사 기반 모임 참여자 |
| 플랫폼 | 웹 중심 MVP (모바일 반응형) |
| 출시 목표 | 2025년 2월 |

### 1.2 핵심 가치

| 가치 | 설명 |
|------|------|
| 참여 | 모임 생성/검색/참가/일정 관리를 한 곳에서 |
| 신뢰 | 평점/리뷰/신고/차단으로 안전한 커뮤니티 |
| 소통 | 웹 내 실시간 채팅으로 즉시 소통 |
| 운영 | 관리자가 코드 배포 없이 섹션/배너/카테고리 제어 |

### 1.3 사업 목표 (3개월)

| 지표 | 목표 |
|------|------|
| 가입자 | 5,000명 |
| 활성 사용자 | 1,000명/월 |
| 모임 생성 | 500개 |
| 월 참여 | 10,000명 |
| 평점 | 4.5/5 이상 |
| 신고율 | 2% 미만 |
| 가용성 | 99.9% |
| API 응답 | 500ms 이내 |

---

## 2. 사용자 페르소나

### 2.1 일반 사용자 - 김민수 (28세, 직장인)

**배경:**
- 주말 등산 모임을 찾고 있음
- 신뢰할 수 있는 모임 원함
- 일정 변경 알림 필요

**니즈:**
- 관심사 기반 모임 검색
- 모임 평점/리뷰 확인
- 일정 변경 실시간 알림

**Pain Points:**
- 기존 플랫폼은 신뢰성 부족
- 일정 변경 알림이 늦음

### 2.2 모임 주최자 - 이수진 (35세, 프리랜서)

**배경:**
- 독서 모임을 직접 운영하고 싶음
- 정기 모임 일정 관리 필요
- 참가자 관리 기능 필요

**니즈:**
- 간편한 모임 생성
- 참가 신청 승인/거절
- 다중 일정 관리
- 참가자와 채팅

**Pain Points:**
- 참가자 관리가 번거로움
- 일정 공지가 어려움

### 2.3 관리자 - 박지훈

**배경:**
- 신고 처리, 콘텐츠 관리 담당
- 대시보드로 현황 파악 필요
- 배너/섹션 직접 수정 필요

**니즈:**
- 실시간 대시보드
- 신고 처리 워크플로우
- 콘텐츠 관리 (배너, 섹션, 카테고리)

---

## 3. 기능 명세

### 3.1 인증 & 사용자

#### 3.1.1 회원가입/로그인

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 이메일 가입 | 이메일 + 비밀번호 | P0 |
| 비밀번호 정책 | 8자+, 대소문자/숫자/특수문자 | P0 |
| JWT 인증 | Access 24h, Refresh 7d | P0 |
| httpOnly 쿠키 | XSS/CSRF 방어 | P0 |
| 이메일 인증 | 가입 시 인증 메일 발송 | P1 |
| 비밀번호 재설정 | 이메일로 재설정 링크 | P1 |

#### 3.1.2 프로필

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 기본 정보 | 닉네임, 자기소개 | P0 |
| 프로필 사진 | Cloudflare R2 저장 | P0 |
| 얼굴 사진 | 선택, 모임주가 참가자 확인용 | P1 |
| 팔로우/팔로잉 | 관심 사용자 팔로우 | P2 |

#### 3.1.3 사용자 플로우

```
[회원가입]
이메일 입력 → 비밀번호 입력 → 닉네임 입력 → 이메일 인증 → 완료

[로그인]
이메일/비밀번호 입력 → JWT 발급 → httpOnly 쿠키 저장 → 홈 이동

[로그아웃]
로그아웃 클릭 → 토큰 블랙리스트 추가 → 쿠키 삭제 → 로그인 페이지
```

### 3.2 모임

#### 3.2.1 CRUD

| 기능 | 설명 | 권한 | 우선순위 |
|------|------|------|----------|
| 생성 | 제목/설명/카테고리/지역/최대인원/이미지 | 로그인 사용자 | P0 |
| 조회 | 목록(필터링), 상세 | 모든 사용자 | P0 |
| 수정 | 모임 정보 수정 | 모임주 | P0 |
| 삭제 | 소프트 삭제 | 모임주 | P0 |
| 취소 | 모임 취소 (참가자 알림) | 모임주 | P0 |

#### 3.2.2 검색 & 필터

| 필터 | 옵션 |
|------|------|
| 카테고리 | 운동, 게임, 음식, 문화, 여행, 학습 |
| 지역 | 서울, 경기, 인천, 부산 등 |
| 날짜 | 오늘, 이번 주, 이번 달, 직접 선택 |
| 상태 | 모집중, 진행중, 완료 |
| 정렬 | 최신순, 인기순, 평점순, 마감임박순 |

#### 3.2.3 일정 관리

| 기능 | 설명 |
|------|------|
| 다중 일정 | 하나의 모임에 여러 일정 추가 가능 |
| 일정 CRUD | 추가/수정/삭제 |
| 상태 자동화 | RECRUITING → ONGOING → COMPLETED |
| 리마인더 | 일정 1시간 전 알림 |

#### 3.2.4 모임 상태 흐름

```
[DRAFT] → [RECRUITING] → [ONGOING] → [COMPLETED]
              ↓
          [CANCELLED]
```

### 3.3 참가 & 승인

#### 3.3.1 기능

| 기능 | 설명 |
|------|------|
| 신청 | 모임 참가 신청 |
| 자동 승인 | 모임주가 설정 가능 |
| 승인/거절 | 모임주가 처리 |
| 취소 | 참가자가 직접 취소 |
| 강퇴 | 모임주가 참가자 강퇴 |

#### 3.3.2 참가 상태 흐름

```
[PENDING] → [APPROVED] → [ATTENDED]
    ↓           ↓
[REJECTED]  [CANCELLED]
                ↓
            [KICKED]
```

### 3.4 리뷰 & 평점

| 기능 | 설명 | 조건 |
|------|------|------|
| 리뷰 작성 | 별점(1-5) + 텍스트 | 모임 완료 후 참가자만 |
| 리뷰 수정 | 본인 리뷰만 | 작성자 |
| 리뷰 삭제 | 본인 리뷰만 | 작성자 |
| 평균 평점 | 모임별 평균 표시 | - |

### 3.5 신고 & 차단

#### 3.5.1 신고

| 대상 | 사유 |
|------|------|
| 모임 신고 | 스팸, 부적절한 콘텐츠, 불법 거래 |
| 사용자 신고 | 괴롭힘, 사기, 명예훼손 |

#### 3.5.2 신고 처리 흐름

```
[PENDING] → [PROCESSING] → [RESOLVED]
                ↓
            [REJECTED]
```

#### 3.5.3 차단

| 기능 | 효과 |
|------|------|
| 사용자 차단 | 차단 대상과 채팅/모임 불가 |
| 차단 해제 | 언제든 해제 가능 |
| 차단 목록 | 차단한 사용자 목록 조회 |

### 3.6 알림

#### 3.6.1 알림 유형

| 유형 | 트리거 | 중요도 |
|------|--------|--------|
| 참가 승인 | 모임주가 승인 시 | HIGH |
| 참가 거절 | 모임주가 거절 시 | HIGH |
| 일정 변경 | 모임 일정 수정 시 | HIGH |
| 리마인더 | 일정 1시간 전 | NORMAL |
| 새 리뷰 | 내 모임에 리뷰 작성 시 | NORMAL |
| 모임 취소 | 모임이 취소될 때 | CRITICAL |

#### 3.6.2 알림 정책

- 읽음/안읽음 상태 관리
- 30일 후 자동 삭제

### 3.7 채팅

#### 3.7.1 기능

| 기능 | 설명 |
|------|------|
| 모임별 채팅방 | 모임 참가자만 접근 |
| 실시간 메시지 | Socket.IO 기반 |
| 메시지 저장 | DB에 영구 저장 |
| 메시지 삭제 | 작성자/관리자만 |

#### 3.7.2 접근 권한

- 승인된 참가자만 채팅방 접근 가능
- 강퇴/차단된 사용자는 접근 불가

### 3.8 관리자

#### 3.8.1 섹션 관리

| 기능 | 설명 |
|------|------|
| 섹션 CRUD | Hero, Featured, Categories 등 |
| 드래그 정렬 | 순서 변경 |
| 활성화/비활성화 | 노출 제어 |
| layout_json | 프론트 렌더링 설정 |

#### 3.8.2 배너 관리

| 기능 | 설명 |
|------|------|
| 배너 CRUD | 이미지, 링크, 순서 |
| 노출 기간 | 시작/종료일 설정 |
| 클릭 통계 | 클릭 수 추적 |

#### 3.8.3 카테고리 관리

| 기능 | 설명 |
|------|------|
| 카테고리 CRUD | 이름, 아이콘, 색상 |
| 정렬 순서 | 표시 순서 설정 |
| 활성화 | 노출 제어 |

#### 3.8.4 대시보드

| 지표 | 설명 |
|------|------|
| 사용자 통계 | 가입자, 활성 사용자 |
| 모임 통계 | 생성, 참여, 완료 |
| 신고 현황 | 대기중, 처리완료 |

#### 3.8.5 기타

| 기능 | 설명 |
|------|------|
| 공지사항 | 공지 CRUD |
| 점검 모드 | 서비스 점검 메시지 |
| 활동 로그 | 변경 이력 조회/복원 |

---

## 4. 화면 구성

### 4.1 페이지 목록

```
/                           - 홈 (섹션, 배너, 추천 모임)
├── /login                  - 로그인
├── /register               - 회원가입
├── /forgot-password        - 비밀번호 찾기
│
├── /meetings               - 모임 목록
│   ├── /create             - 모임 생성
│   └── /[id]               - 모임 상세
│       └── /chat           - 모임 채팅
│
├── /profile                - 내 프로필
│   ├── /edit               - 프로필 수정
│   └── /[id]               - 타인 프로필
│
├── /notifications          - 알림
├── /bookmarks              - 북마크
│
└── /admin                  - 관리자 대시보드
    ├── /sections           - 섹션 관리
    ├── /banners            - 배너 관리
    ├── /categories         - 카테고리 관리
    ├── /reports            - 신고 관리
    └── /users              - 사용자 관리
```

### 4.2 주요 화면 설명

#### 4.2.1 홈 (/)

- 히어로 배너
- 추천 모임 섹션
- 카테고리 목록
- 최신 모임

#### 4.2.2 모임 목록 (/meetings)

- 필터 사이드바 (카테고리, 지역, 날짜)
- 정렬 옵션
- 모임 카드 그리드
- 페이지네이션

#### 4.2.3 모임 상세 (/meetings/[id])

- 모임 이미지
- 기본 정보 (제목, 설명, 카테고리)
- 일정 목록
- 참가자 목록
- 리뷰 목록
- 참가 신청 버튼
- 채팅 버튼 (참가자만)

#### 4.2.4 채팅 (/meetings/[id]/chat)

- 메시지 목록
- 메시지 입력
- 참가자 목록

---

## 5. 비기능 요구사항

### 5.1 성능

| 항목 | 목표 |
|------|------|
| API 응답 시간 | 500ms 이내 |
| 페이지 로드 | 3초 이내 |
| 동시 접속자 | 1,000명 |

### 5.2 가용성

| 항목 | 목표 |
|------|------|
| 서비스 가용성 | 99.9% |
| 장애 복구 시간 | 1시간 이내 |

### 5.3 보안

- OWASP Top 10 대응
- 개인정보보호법 준수
- HTTPS 필수

---

## 6. 개발 우선순위

### P0 (필수)

- 회원가입/로그인
- 모임 CRUD
- 참가 신청/승인
- 기본 검색

### P1 (중요)

- 이메일 인증
- 리뷰/평점
- 알림
- 채팅

### P2 (선택)

- 팔로우
- 북마크
- 고급 필터

---

## 7. 용어 정의

| 용어 | 정의 |
|------|------|
| 모임주 (Host) | 모임을 생성한 사용자 |
| 참가자 (Participant) | 모임에 참가 신청한/승인된 사용자 |
| 섹션 (Section) | 홈페이지의 콘텐츠 영역 |
| 배너 (Banner) | 광고/공지용 이미지 |

---

**관련 문서:**
- [TRD.md](./TRD.md) - 기술 요구사항
- [SECURITY.md](./SECURITY.md) - 보안 정책
